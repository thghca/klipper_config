[gcode_macro M117]
description: M117 but mirror output to console.
variable_prefix = "Status: "
rename_existing: M117.1
gcode:
    {% if rawparams %}
        {% set escaped_msg = rawparams.split(';', 1)[0].split('\x23', 1)[0]|replace('"', '\\"') %}
        #SET_DISPLAY_TEXT MSG="{escaped_msg}"
        #RESPOND TYPE=command MSG="{escaped_msg}"
        RESPOND PREFIX="{prefix}" MSG="{escaped_msg}"   #dgus fork display mirror console output as status for some reason
        DGUS_SET_MESSAGE MESSAGE="{escaped_msg}"          #overwrite without prefix
    {% else %}
        #SET_DISPLAY_TEXT
        DGUS_SET_MESSAGE
    {% endif %}



